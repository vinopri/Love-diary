<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home - Our Love</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header>
    <div class="left-header">
      <div class="menu-icon" onclick="toggleMenu()">â˜°</div>
    </div>
  </header>

  <div class="home-container">
    <h1>Hi My Love ğŸ’–</h1>
    <p id="greetingMsg"></p>
    <p id="quoteOfTheDay"></p>

    <button class="surprise-btn" onclick="location.href='login.html'">ğŸ Surprise</button>
  

    <!-- Toggle Menu -->
    <nav id="menu" class="hidden">
      <ul>
        <li><a href="love-calculator.html">ğŸ’‘ Love Calculator</a></li>
        <li><a href="secret.html">ğŸ“œ Secret Letter</a></li>
        <li><a href="puzzle.html">ğŸ§© Love Puzzle</a></li>
        <li><a href="notes.html">ğŸ“ Notes</a></li>
      </ul>
    </nav>
  </div>

  <script>
    // Greeting message
    const now = new Date();
    const hrs = now.getHours();
    let greet = "Good Evening ğŸŒ™";
    if (hrs < 12) greet = "Good Morning â˜€ï¸";
    else if (hrs < 18) greet = "Good Afternoon ğŸŒ¸";
    document.getElementById("greetingMsg").innerText = greet;

    // Daily quote
    const quotes = [
      "You're my today and all of my tomorrows.",
      "In your smile, I see something more beautiful than the stars.",
      "You're not my number one. You're my only one.",
      "Every love story is beautiful, but ours is my favorite."
    ];
    const quote = quotes[Math.floor(Math.random() * quotes.length)];
    document.getElementById("quoteOfTheDay").innerText = quote;

    function toggleMenu() {
      document.getElementById("menu").classList.toggle("hidden");
    }

    const quotesByWeek = [
      [ "Youâ€™re my first thought every morning ğŸ’­", "Your smile is my favorite sunrise â˜€ï¸", "Even cloudy days are warm with your love ğŸŒ¦", "Youâ€™re stronger than you think, my love ğŸ’ª", "Our love grows with every heartbeat ğŸ’“", "Youâ€™re my peace and my passion ğŸ˜ŒğŸ”¥", "No one loves you like I do ğŸ’˜" ],
      [ "Another day to be yours â¤ï¸", "You light up my darkest mornings ğŸŒ„", "Hold on, I believe in you ğŸ’«", "The world is better with you in it ğŸŒ", "Youâ€™re my sunshine and storm ğŸ’", "Saturday cuddles from far away ğŸ¤—", "Forever isnâ€™t enough with you ğŸ•Šï¸" ],
      [ "Wake up, youâ€™re loved ğŸŒ¸", "You're the reason I smile ğŸ’•", "Midweek hugs just for you ğŸ¤—", "You're doing amazing, keep going âœ¨", "Let love guide your day ğŸ’“", "Relax baby, you deserve it ğŸŒ·", "My heart is with you always ğŸ’–" ]
    ];

    const dailyReminders = {
      7: () => `ğŸŒ Good Morning! ${getDailyQuote()}`,
      8.5: () => "ğŸ½ Donâ€™t skip breakfast dear ğŸ’•",
      11: () => "ğŸ’§ Drink water baby ğŸ’§ Stay healthy!",
      13: () => "ğŸ± Lunch time! Think of me while eating ğŸ˜‹",
      15: () => "ğŸ’¦ Water break! Your health is precious ğŸ’–",
      17: () => "â˜• Evening tea or coffee â€” imagine weâ€™re sipping together ğŸ’‘",
      19: () => "ğŸ•– Iâ€™m waiting for you babyâ€¦ miss you every second ğŸ¥º",
      21: () => "ğŸ½ Dinner time â€” eat well and rest properly!",
      23: () => "ğŸŒ™ Good Night sweetheart ğŸ’« Dream of us â¤ï¸"
    };

    function getCurrentWeekIndex() {
      const startDate = new Date("2025-01-01");
      const now = new Date();
      return Math.floor((now - startDate) / (7 * 24 * 60 * 60 * 1000)) % 3;
    }

    function getDailyQuote() {
      const dayIndex = (new Date().getDay() + 6) % 7;
      return quotesByWeek[getCurrentWeekIndex()][dayIndex];
    }

    function vibrateOnly() {
      if ("vibrate" in navigator) navigator.vibrate(100);
    }

    function showLoveNotification(text) {
      if (Notification.permission === "granted") {
        new Notification("ğŸ’• Love Reminder ğŸ’•", {
          body: text,
          icon: "assets/images/heart-icon.png" // optional
        });
        vibrateOnly();
      }
    }

    function checkReminders() {
      const now = new Date();
      const currentHours = now.getHours();
      const currentMinutes = now.getMinutes();

      Object.entries(dailyReminders).forEach(([hourKey, msgFunc]) => {
        const floatHour = parseFloat(hourKey);
        const targetHour = Math.floor(floatHour);
        const targetMinute = Math.round((floatHour % 1) * 60);

        if (currentHours === targetHour && currentMinutes === targetMinute) {
          console.log(`âœ… Reminder at ${targetHour}:${targetMinute}`);
          showLoveNotification(msgFunc());
        }
      });
    }

    if ("Notification" in window && Notification.permission !== "granted") {
      Notification.requestPermission().then(permission => {
        console.log("Notification permission:", permission);
      });
    }

    setInterval(checkReminders, 60000); // Check every minute
  </script>
</body>
</html>
